import Chart from "chart.js";
require('es6-promise').polyfill();
import axios from "axios";


let ctx = document.getElementById("myChart");
let btn = document.getElementById("btnRefresh");
btn.addEventListener("click", reload);
let inputDB = document.getElementById("inputData");
let inputPW = document.getElementById("inputPass");
let inputTS = document.getElementById("inputTimeseries");

function reload(event) {
    loadChart(inputDB.value, inputPW.value, inputTS.value);
}

function loadChart(db, pw, timeseries) {
    let url = `http://mociotdb2.teco.edu/db.php/read/${db}?dbKey=${pw}&q=select%20*%20from%20${timeseries}`;
    console.log(url);

    axios.get(url, {
        crossDomain: true
    })
        .then(res => {
            createChart(JSON.parse(res.body));
        })
        .catch(err => {
            console.log(err);
            createChart(dummyData);
        });
}

function createChart(jsonData) {

    console.log("jsonData", jsonData);

    let series = jsonData.results[0].series[0];
    let columns = series.columns;
    let timeIndex = columns.indexOf("time");
    let values = series.values;

    let datasets = columns.map( c => {
        return {
            label: c,
            data: []
        };
    });

    console.log("test");

    values.forEach(v => {
        const time = new Date(v[timeIndex]);

        for (var i = 0; i < v.length; ++i){
            if (i == timeIndex) continue;
            const val = v[i];

            if (val)
                datasets[i].data.push({x: time, y: v[i]});
        }
    });

    console.log(datasets);

    var myChart = new Chart(ctx, {
        type: 'line',
        fill: false,
        data: {
            datasets: datasets.filter(d => d.label != "time" && d.label != "pres")
        },
        options: {
            scales: {
                xAxes: [{
                    type: 'linear',
                    position: 'bottom'
                }]
            }
        }
    });
}






















const dummyData =  JSON.parse(`{"results":[{"series":[{"name":"mytimeseries","columns":["time","co2","humi","nh3","no2","pres","temp"],"values":[["2017-03-16T00:58:25.838748123Z",0.8690812,63,0.14444605,1.5775142,101607,12.8],["2017-03-16T00:59:39.861195166Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:40.722769151Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:40.733791182Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:40.734335456Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:41.729225108Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:41.729451135Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:41.7310198Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:42.726816489Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:42.740930799Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:42.74133149Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:43.726340797Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:43.741785363Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:43.7464889Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:44.722111975Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:44.725141161Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:44.725340978Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:45.745173325Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:45.745263473Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:45.745588024Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T01:00:01.734469097Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T01:00:02.686414973Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:00:02.695182693Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:00:03.742888446Z",0.51137376,63,0.10064499,1.550361,101603,12.75],["2017-03-16T01:00:03.744801004Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:00:03.748381134Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:07:12.783460197Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:13.704603915Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:13.715554989Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:13.734687995Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:14.738461295Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:14.738627772Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:14.739174973Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:23:15.86342964Z",0.4909083,64,0.097795285,1.5775142,101600,12.53],["2017-03-16T01:25:34.388959679Z",0.4702213,64,0.09265096,1.61825,101600,12.53],["2017-03-16T01:26:24.900082318Z",0.4702213,64,0.09265096,1.6318302,101601,12.51],["2017-03-16T01:27:35.729649642Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:36.70080792Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:36.834641476Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:36.924266782Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:37.731093885Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:37.884273517Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:38.048080401Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:39.036359304Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:39.163218031Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:39.27117142Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.025772111Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.165300138Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.280361936Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.686158739Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.863922867Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.028193195Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.686494019Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.869138099Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.980952437Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:42.72395754Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:42.934304684Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:43.080511811Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:43.739461967Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:43.940375408Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:44.073672694Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:44.701831041Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:44.799555992Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:44.957699144Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:45.669688048Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:45.806719742Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:45.965736094Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:46.719140025Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:46.847080882Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:47.019744439Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:47.754692222Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:47.874065012Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:48.029266523Z",0.4909083,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:48.738046049Z",0.4702213,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:48.836098935Z",0.4702213,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:48.985039593Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:49.657422548Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:49.77052474Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:49.872209573Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:50.722491574Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:50.844009977Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:50.930513043Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:51.655211374Z",0.45108986,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:51.78612568Z",0.45108986,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:51.886327602Z",0.45108986,64,0.08775849,1.6318302,101596,12.45],["2017-03-16T01:27:52.724420542Z",0.4909083,64,0.08775849,1.6318302,101596,12.45],["2017-03-16T01:27:52.831017831Z",0.4909083,64,0.08775849,1.61825,101596,12.45],["2017-03-16T01:27:52.943258217Z",0.4909083,64,0.0899773,1.61825,101596,12.45],["2017-03-16T01:27:53.709848561Z",0.4909083,64,0.0899773,1.61825,101596,12.45],["2017-03-16T01:27:53.850270626Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:53.95285101Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:54.712812192Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:54.821969384Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:54.92212169Z",0.4909083,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:55.654581983Z",0.4909083,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:55.744776273Z",0.4909083,64,0.039870486,1.61825,101596,12.45],["2017-03-16T01:27:55.822388095Z",0.4909083,64,0.0899773,1.61825,101596,12.45],["2017-03-16T01:35:09.679064741Z",0.8904676,64,0.0899773,1.6318302,101588,12.34],["2017-03-16T01:39:41.706225217Z",null,null,null,null,null,12.34],["2017-03-16T01:39:42.733947794Z",null,null,null,null,null,12.34],["2017-03-16T01:39:43.660093437Z",null,null,null,null,null,12.33],["2017-03-16T01:39:44.656491492Z",null,null,null,null,null,12.34],["2017-03-16T01:39:45.717640531Z",null,null,null,null,null,12.34],["2017-03-16T01:46:11.727216601Z",null,null,null,null,null,12.3],["2017-03-16T01:46:11.911019422Z",null,63,null,null,null,null],["2017-03-16T01:46:12.643945336Z",null,null,null,null,null,12.3],["2017-03-16T01:46:12.794587246Z",null,63,null,null,null,null],["2017-03-16T01:46:12.97093302Z",null,null,null,null,101559,null],["2017-03-16T01:46:13.635570253Z",null,null,null,null,null,12.3],["2017-03-16T01:46:13.862690094Z",null,63,null,null,null,null],["2017-03-16T01:46:14.659015393Z",null,null,null,null,null,12.3],["2017-03-16T01:46:16.653592251Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:17.650592207Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:18.774524052Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:18.938898207Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:19.406710025Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:19.599737454Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:19.788730735Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:19.99591493Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:20.159679119Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:20.775435383Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:20.949948641Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:21.143860735Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:21.623026049Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:21.842738097Z",null,null,null,1.4282135,null,null],["2017-03-16T01:46:21.993628398Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:22.664667679Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:22.871034393Z",null,null,null,1.4282135,null,null],["2017-03-16T01:46:23.11855381Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:23.624154959Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:23.838465292Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:24.01323017Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:24.66338027Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:24.855054275Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:25.021366442Z",null,null,0.045334402,null,null,null],["2017-03-16T01:46:25.599394811Z",0.4909083,null,null,null,null,null],["2017-03-16T01:46:25.752924494Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:26.011231621Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:26.218562151Z",null,null,null,null,101570,null],["2017-03-16T01:46:26.651801614Z",0.47134376,null,null,null,null,null],["2017-03-16T01:46:26.850981136Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:27.010094862Z",null,null,0.092833705,null,null,null],["2017-03-16T01:46:27.588609195Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:27.738117302Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:27.971806018Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:28.137379906Z",null,null,null,null,null,12.3],["2017-03-16T01:46:28.303746727Z",null,63,null,null,null,null],["2017-03-16T01:46:28.641497418Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:28.739234827Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:28.831836644Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:29.656545496Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:29.739045364Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:29.846857867Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:30.620513015Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:30.661512505Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:30.739078442Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:31.663001026Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:31.73951997Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:32.13900555Z",null,null,0.045334402,null,null,null],["2017-03-16T01:46:32.628479788Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:32.798335533Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:32.952101402Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:33.640299964Z",0.4909083,null,null,null,null,null],["2017-03-16T01:46:33.809226968Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:34.032234386Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:34.657184433Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:34.819856034Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:35.004915487Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:35.651732509Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:35.807069076Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:36.041469471Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:36.727868986Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:36.895895161Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:37.120674701Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:37.655103524Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:37.809552845Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:38.007187998Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:39.175516319Z",0.8469606,null,null,null,null,null],["2017-03-16T01:46:39.370536424Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:39.573967765Z",null,null,0.1415252,null,null,null],["2017-03-16T01:46:39.852791305Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:40.017314298Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:40.190090841Z",null,null,0.097795285,null,null,null],["2017-03-16T01:47:07.733586634Z",null,null,null,null,null,12.3],["2017-03-16T01:47:07.99558157Z",null,63,null,null,null,null],["2017-03-16T01:47:08.664106041Z",null,null,null,null,null,12.3],["2017-03-16T01:47:08.867018226Z",null,63,null,null,null,null],["2017-03-16T01:47:09.02352564Z",null,null,null,null,101570,null],["2017-03-16T01:47:09.615805556Z",null,null,null,null,null,12.29],["2017-03-16T01:47:09.762198028Z",null,63,null,null,null,null],["2017-03-16T01:47:10.622330699Z",null,null,null,null,null,12.29],["2017-03-16T01:47:12.63131627Z",0.4909083,null,null,null,null,null],["2017-03-16T01:47:13.657608578Z",0.4909083,null,null,null,null,null],["2017-03-16T01:47:13.808290907Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:14.666731815Z",0.4909083,null,null,null,null,null],["2017-03-16T01:47:14.831060994Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:15.044304612Z",null,null,0.097795285,null,null,null],["2017-03-16T01:47:16.649670112Z",0.51137376,null,null,null,null,null],["2017-03-16T01:47:16.852705408Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:17.002856984Z",null,null,0.097795285,null,null,null],["2017-03-16T01:47:17.694383391Z",0.51137376,null,null,null,null,null],["2017-03-16T01:47:17.869058101Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:18.048581947Z",null,null,0.1415252,null,null,null],["2017-03-16T16:08:16.240023197Z",null,null,null,null,null,25.42],["2017-03-16T16:08:17.217712877Z",null,null,null,null,null,25.42],["2017-03-16T16:08:17.382610508Z",null,26,null,null,null,null],["2017-03-16T16:08:18.152278801Z",null,null,null,null,null,25.42],["2017-03-16T16:08:18.323436245Z",null,26,null,null,null,null],["2017-03-16T16:08:18.507125837Z",null,null,null,null,100801,null],["2017-03-16T16:08:19.186977887Z",null,null,null,null,null,25.42],["2017-03-16T16:08:19.339388967Z",null,26,null,null,null,null],["2017-03-16T16:08:20.128453392Z",null,null,null,null,null,25.43],["2017-03-16T16:08:22.157467479Z",1.4863172,null,null,null,null,null],["2017-03-16T16:08:23.18384204Z",1.4586147,null,null,null,null,null],["2017-03-16T16:08:23.291530797Z",null,null,null,0.9674843,null,null],["2017-03-16T16:08:24.151074214Z",1.4318516,null,null,null,null,null],["2017-03-16T16:08:24.973117318Z",null,null,null,0.9539536,null,null],["2017-03-16T16:08:25.140469642Z",null,null,0.10064499,null,null,null],["2017-03-16T16:08:25.239068661Z",1.4059821,null,null,null,null,null],["2017-03-16T16:08:25.330505465Z",null,null,null,0.9539536,null,null],["2017-03-16T16:08:25.378354569Z",null,null,0.045334402,null,null,null],["2017-03-16T16:08:26.157533192Z",1.3809634,null,null,null,null,null],["2017-03-16T16:08:26.307175244Z",null,null,null,0.94042426,null,null],["2017-03-16T16:08:26.39920105Z",null,null,0.10064499,null,null,null],["2017-03-16T16:08:27.228413048Z",1.3547734,null,null,null,null,null],["2017-03-16T16:08:27.333159923Z",null,null,null,0.94042426,null,null],["2017-03-16T16:08:27.430014574Z",null,null,0.10064499,null,null,null],["2017-03-16T16:08:28.142344158Z",1.3275778,null,null,null,null,null],["2017-03-16T16:08:28.248641718Z",null,null,null,0.94042426,null,null],["2017-03-16T16:08:28.396452857Z",null,null,0.10064499,null,null,null],["2017-03-16T16:08:29.153911536Z",1.3275778,null,null,null,null,null],["2017-03-16T16:08:29.257291555Z",null,null,null,0.9268963,null,null],["2017-03-16T16:08:29.358425403Z",null,null,0.10341195,null,null,null],["2017-03-16T16:08:30.153396901Z",1.3032142,null,null,null,null,null],["2017-03-16T16:08:30.243359373Z",null,null,null,0.9268963,null,null],["2017-03-16T16:08:30.332749309Z",null,null,0.10341195,null,null,null],["2017-03-16T16:08:31.211932487Z",1.2778853,null,null,null,null,null],["2017-03-16T16:08:31.319394761Z",null,null,null,0.9268963,null,null],["2017-03-16T16:08:31.435327206Z",null,null,0.10341195,null,null,null],["2017-03-16T16:08:32.122716604Z",1.2778853,null,null,null,null,null],["2017-03-16T16:08:32.230595366Z",null,null,null,0.9268963,null,null],["2017-03-16T16:08:32.328005722Z",null,null,0.10341195,null,null,null],["2017-03-16T16:08:32.430676079Z",null,26,null,null,null,null],["2017-03-16T16:08:32.839562888Z",null,null,null,null,100804,null],["2017-03-16T16:08:33.154049324Z",1.2517391,null,null,null,null,null],["2017-03-16T16:08:33.352704623Z",null,null,null,0.9268963,null,null],["2017-03-16T16:08:33.521228443Z",null,null,0.10341195,null,null,null],["2017-03-16T16:08:35.194870632Z",1.2265649,null,null,null,null,null],["2017-03-16T16:08:35.337062453Z",null,null,null,0.91336966,null,null],["2017-03-16T16:08:35.535480918Z",null,null,0.047259603,null,null,null]]}]}]}
`);



// const dummyData = JSON.parse(`{"results":[{"series":[{"name":"mytimeseries","columns":["time","co2","humi","nh3","no2","pres","temp"],"values":[["2017-03-16T00:58:25.838748123Z",0.8690812,63,0.14444605,1.5775142,101607,12.8],["2017-03-16T00:59:39.861195166Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:40.722769151Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:40.733791182Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:40.734335456Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:41.729225108Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:41.729451135Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:41.7310198Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:42.726816489Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:42.740930799Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:42.74133149Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:43.726340797Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:43.741785363Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:43.7464889Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:44.722111975Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:44.725141161Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:44.725340978Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:45.745173325Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:45.745263473Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T00:59:45.745588024Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T01:00:01.734469097Z",0.51137376,63,0.10064499,1.550361,101598,12.74],["2017-03-16T01:00:02.686414973Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:00:02.695182693Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:00:03.742888446Z",0.51137376,63,0.10064499,1.550361,101603,12.75],["2017-03-16T01:00:03.744801004Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:00:03.748381134Z",0.51137376,63,0.10064499,1.550361,101598,12.75],["2017-03-16T01:07:12.783460197Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:13.704603915Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:13.715554989Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:13.734687995Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:14.738461295Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:14.738627772Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:07:14.739174973Z",0.51137376,63,0.10341195,1.5367856,101595,12.68],["2017-03-16T01:23:15.86342964Z",0.4909083,64,0.097795285,1.5775142,101600,12.53],["2017-03-16T01:25:34.388959679Z",0.4702213,64,0.09265096,1.61825,101600,12.53],["2017-03-16T01:26:24.900082318Z",0.4702213,64,0.09265096,1.6318302,101601,12.51],["2017-03-16T01:27:35.729649642Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:36.70080792Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:36.834641476Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:36.924266782Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:37.731093885Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:37.884273517Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:38.048080401Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:39.036359304Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:39.163218031Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:39.27117142Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.025772111Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.165300138Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.280361936Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.686158739Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:40.863922867Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.028193195Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.686494019Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.869138099Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:41.980952437Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:42.72395754Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:42.934304684Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:43.080511811Z",0.4702213,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:43.739461967Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:43.940375408Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:44.073672694Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:44.701831041Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:44.799555992Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:44.957699144Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:45.669688048Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:45.806719742Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:45.965736094Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:46.719140025Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:46.847080882Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:47.019744439Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:47.754692222Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:47.874065012Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:48.029266523Z",0.4909083,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:48.738046049Z",0.4702213,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:48.836098935Z",0.4702213,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:48.985039593Z",0.4702213,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:49.657422548Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:49.77052474Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:49.872209573Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:50.722491574Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:50.844009977Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:50.930513043Z",0.4909083,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:51.655211374Z",0.45108986,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:51.78612568Z",0.45108986,64,0.09265096,1.6318302,101596,12.45],["2017-03-16T01:27:51.886327602Z",0.45108986,64,0.08775849,1.6318302,101596,12.45],["2017-03-16T01:27:52.724420542Z",0.4909083,64,0.08775849,1.6318302,101596,12.45],["2017-03-16T01:27:52.831017831Z",0.4909083,64,0.08775849,1.61825,101596,12.45],["2017-03-16T01:27:52.943258217Z",0.4909083,64,0.0899773,1.61825,101596,12.45],["2017-03-16T01:27:53.709848561Z",0.4909083,64,0.0899773,1.61825,101596,12.45],["2017-03-16T01:27:53.850270626Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:53.95285101Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:54.712812192Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:54.821969384Z",0.4909083,64,0.0899773,1.6318302,101596,12.45],["2017-03-16T01:27:54.92212169Z",0.4909083,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:55.654581983Z",0.4909083,64,0.039870486,1.6318302,101596,12.45],["2017-03-16T01:27:55.744776273Z",0.4909083,64,0.039870486,1.61825,101596,12.45],["2017-03-16T01:27:55.822388095Z",0.4909083,64,0.0899773,1.61825,101596,12.45],["2017-03-16T01:35:09.679064741Z",0.8904676,64,0.0899773,1.6318302,101588,12.34],["2017-03-16T01:39:41.706225217Z",null,null,null,null,null,12.34],["2017-03-16T01:39:42.733947794Z",null,null,null,null,null,12.34],["2017-03-16T01:39:43.660093437Z",null,null,null,null,null,12.33],["2017-03-16T01:39:44.656491492Z",null,null,null,null,null,12.34],["2017-03-16T01:39:45.717640531Z",null,null,null,null,null,12.34],["2017-03-16T01:46:11.727216601Z",null,null,null,null,null,12.3],["2017-03-16T01:46:11.911019422Z",null,63,null,null,null,null],["2017-03-16T01:46:12.643945336Z",null,null,null,null,null,12.3],["2017-03-16T01:46:12.794587246Z",null,63,null,null,null,null],["2017-03-16T01:46:12.97093302Z",null,null,null,null,101559,null],["2017-03-16T01:46:13.635570253Z",null,null,null,null,null,12.3],["2017-03-16T01:46:13.862690094Z",null,63,null,null,null,null],["2017-03-16T01:46:14.659015393Z",null,null,null,null,null,12.3],["2017-03-16T01:46:16.653592251Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:17.650592207Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:18.774524052Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:18.938898207Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:19.406710025Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:19.599737454Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:19.788730735Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:19.99591493Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:20.159679119Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:20.775435383Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:20.949948641Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:21.143860735Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:21.623026049Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:21.842738097Z",null,null,null,1.4282135,null,null],["2017-03-16T01:46:21.993628398Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:22.664667679Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:22.871034393Z",null,null,null,1.4282135,null,null],["2017-03-16T01:46:23.11855381Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:23.624154959Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:23.838465292Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:24.01323017Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:24.66338027Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:24.855054275Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:25.021366442Z",null,null,0.045334402,null,null,null],["2017-03-16T01:46:25.599394811Z",0.4909083,null,null,null,null,null],["2017-03-16T01:46:25.752924494Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:26.011231621Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:26.218562151Z",null,null,null,null,101570,null],["2017-03-16T01:46:26.651801614Z",0.47134376,null,null,null,null,null],["2017-03-16T01:46:26.850981136Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:27.010094862Z",null,null,0.092833705,null,null,null],["2017-03-16T01:46:27.588609195Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:27.738117302Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:27.971806018Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:28.137379906Z",null,null,null,null,null,12.3],["2017-03-16T01:46:28.303746727Z",null,63,null,null,null,null],["2017-03-16T01:46:28.641497418Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:28.739234827Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:28.831836644Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:29.656545496Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:29.739045364Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:29.846857867Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:30.620513015Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:30.661512505Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:30.739078442Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:31.663001026Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:31.73951997Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:32.13900555Z",null,null,0.045334402,null,null,null],["2017-03-16T01:46:32.628479788Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:32.798335533Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:32.952101402Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:33.640299964Z",0.4909083,null,null,null,null,null],["2017-03-16T01:46:33.809226968Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:34.032234386Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:34.657184433Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:34.819856034Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:35.004915487Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:35.651732509Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:35.807069076Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:36.041469471Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:36.727868986Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:36.895895161Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:37.120674701Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:37.655103524Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:37.809552845Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:38.007187998Z",null,null,0.097795285,null,null,null],["2017-03-16T01:46:39.175516319Z",0.8469606,null,null,null,null,null],["2017-03-16T01:46:39.370536424Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:39.573967765Z",null,null,0.1415252,null,null,null],["2017-03-16T01:46:39.852791305Z",0.51137376,null,null,null,null,null],["2017-03-16T01:46:40.017314298Z",null,null,null,1.4417819,null,null],["2017-03-16T01:46:40.190090841Z",null,null,0.097795285,null,null,null],["2017-03-16T01:47:07.733586634Z",null,null,null,null,null,12.3],["2017-03-16T01:47:07.99558157Z",null,63,null,null,null,null],["2017-03-16T01:47:08.664106041Z",null,null,null,null,null,12.3],["2017-03-16T01:47:08.867018226Z",null,63,null,null,null,null],["2017-03-16T01:47:09.02352564Z",null,null,null,null,101570,null],["2017-03-16T01:47:09.615805556Z",null,null,null,null,null,12.29],["2017-03-16T01:47:09.762198028Z",null,63,null,null,null,null],["2017-03-16T01:47:10.622330699Z",null,null,null,null,null,12.29],["2017-03-16T01:47:12.63131627Z",0.4909083,null,null,null,null,null],["2017-03-16T01:47:13.657608578Z",0.4909083,null,null,null,null,null],["2017-03-16T01:47:13.808290907Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:14.666731815Z",0.4909083,null,null,null,null,null],["2017-03-16T01:47:14.831060994Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:15.044304612Z",null,null,0.097795285,null,null,null],["2017-03-16T01:47:16.649670112Z",0.51137376,null,null,null,null,null],["2017-03-16T01:47:16.852705408Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:17.002856984Z",null,null,0.097795285,null,null,null],["2017-03-16T01:47:17.694383391Z",0.51137376,null,null,null,null,null],["2017-03-16T01:47:17.869058101Z",null,null,null,1.4417819,null,null],["2017-03-16T01:47:18.048581947Z",null,null,0.1415252,null,null,null]]}]}]}`)
